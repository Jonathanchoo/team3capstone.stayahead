<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StayAhead</title>
    <!--Boostrap Style-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <!--External css-->
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
</head>

<body>

    <!-- toast -->
    <!-- https://getbootstrap.com/docs/5.3/components/toasts/ --> 
    <div class="toast-container p-3 top-0 start-50 translate-middle-x">
        <!-- Put toasts within -->
        <div id="msg-toast" class="toast align-items-center mt-2" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true" data-bs-delay="4000">
            <div class="d-flex">
                <div id="msg-toast-body" class="toast-body"> 
                <!-- Message to be added here -->
                </div>
                <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

    <!--Nav bar-->
    <section class="non-mobile">
        <nav>
            <div class="logo p-2">
                <a class="nav-link text-white justify-content-start" href="about.html">
                    <img src="assets\images\v1.png">
                    StayAhead
                </a>
            </div>
            <div class="d-flex justify-content-center align-items-center">
                <div>
                    <ul class="nav justify-content-center">
                        <li class="nav-item px-1">
                            <a class="nav-link active" aria-current="page" href="index.html">Home</a>
                        </li>
                        <li class="nav-item px-1">
                            <a class="nav-link" href="about.html">About</a>
                        </li>
                        <li class="nav-item px-1">
                            <a class="nav-link" href="scamalerts.html">Scam Alerts</a>
                        </li>
                        <li class="nav-item px-1">
                            <a class="nav-link" href="game.html">Game</a>
                        </li>
                        <li class="nav-item px-1">
                            <a class="nav-link" id="loginLink" href="signuplogin.html">Sign-up/Login</a>
                        </li>
                        <li class="nav-item px-1">
                            <a class="nav-link" id="logoutLink" href="#">Logout</a>
                        </li>
                    </ul>
                </div>
                <!-- Profile Container -->
                <div id="profileContainer" class="text-center pe-4">
                    <div class="bg-secondary-subtle rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 25px; height: 25px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="gray" class="bi bi-person-fill" viewBox="0 0 16 16">
                            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
                        </svg>
                    </div>
                    <p id="profileNameContainer" class="mb-0 fw-lighter pt-1 text-white" style="font-size: 0.8rem;">Welcome User</p>
                </div>
            </div>
        </nav>
    </section>
    <!--navbar   mobile mode-->
    <section class="mobile d-sm-none">
        <nav class="navbar navbar-expand-lg navbar-dark position-fixed w-100" aria-label="First navbar example">
            <div class="container-fluid">
                <div class="mobile-nvbg d-flex justify-content-between w-100">
                    <div class="logo p-2">
                        <a class="nav-link text-white justify-content-center" href="about.html">
                            <img src="assets\images\v1.png">
                            StayAhead
                        </a>
                    </div><button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarsExample01" aria-controls="navbarsExample01" aria-expanded="false"
                        aria-label="Toggle navigation"> <span class="navbar-toggler-icon"><span></span></span> </button>
                </div>
                <div class="navbar-collapse collapse" id="navbarsExample01">
                    <ul class="navbar-nav me-auto mb-2 ">
                        <li class="nav-item"> <a class="nav-link active" aria-current="page" href="index.html">Home</a> </li>
                        <li class="nav-item"> <a class="nav-link" href="about.html">About</a> </li>
                        <li class="nav-item"> <a class="nav-link" href="scamalerts.html">Scam Alerts</a> </li>
                        <li class="nav-item"> <a class="nav-link" href="game.html">Game</a> </li>
                        <li class="nav-item"> <a class="nav-link" id="m_loginLink" href="signuplogin.html">Signup/Login</a> </li>
                        <li class="nav-item"> <a class="nav-link" id="m_logoutLink" href="#">Logout</a> </li>
                    </ul>
                </div>
            </div>
        </nav>
    </section>
    <!--This is the middle part, insert your page content here-->
    <div class="login-background">
        <div class="container login-container">
            <div class="d-flex justify-content-center h-100">
                <div class="card login-card">
                    <div class="card-header">
                        <h3>Sign In</h3>
                        <div class="d-flex justify-content-end social_icon">
                            <a href="https://facebook.com/" class="social-link Facebook" aria-label="Facebook"
                                target="_blank" rel="noopener noreferrer">
                                <i class="fa-brands fa-facebook"></i>
                            </a>
                            <a href="https://accounts.google.com/" class="social-link google" aria-label="google"
                                target="_blank" rel="noopener noreferrer">
                                <i class="fa-brands fa-google"></i>
                            </a>
                            <a href="https://x.com/" class="social-link Twitter" aria-label="Twitter" target="_blank"
                                rel="noopener noreferrer">
                                <i class="fa-brands fa-twitter"></i>
                            </a>
                        </div>
                    </div>
                    <div class="card-body">
                        <form id="formLogin" class="needs-validation col" novalidate>
                            <div class="d-flex mb-2">
                                <div class="input-group-prepend">
                                    <span class="input-group-text me-2"><i class="fas fa-user"></i></span>
                                </div>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="txtEmail" aria-describedby="inputGroupPrepend2"
                                        placeholder="johncena@hotmail.com" required>
                                        <div class="invalid-feedback text-danger">
                                            Please enter a valid email.
                                        </div>
                                </div>
                            </div>
                            <div class="d-flex mb-2">
                                <div class="input-group-prepend me-2">
                                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                                </div>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="txtPassword" aria-describedby="inputGroupPrepend2"
                                        required>
                                    <div class="invalid-feedback text-danger">
                                            Please enter a valid password.
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <button type="submit" id="btnLogin" value="Login" class="btn login_btn">
                                    Send
                                </button>
                            </div>
                        </form>
                    </div>
                    <div class="card-footer">
                        <div class="d-flex justify-content-center links">
                            Don't have an account?<a href="register.html">&nbsp;Sign up here.</a>
                        </div>
                        <div class="d-flex pt-2 justify-content-center">
                            <a class="forgotpassword" href="#">Forgot password?</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--END Middle Part-->
    
    <!--Footer start here-->
    <!--Footer nav links-->
    <footer>
        <div>
            <nav class="lowernav justify-content-center">
                <ul class="nav justify-content-center">
                    <li class="nav-item px-1">
                        <a class="nav-link active" aria-current="page" href="/index.html">Home</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link" href="/about.html">About</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link " href="/scamalerts.html">Scam Alerts</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link" href="#">Game</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link" href="/signuplogin.html">Sign-up/Login</a>
                    </li>
                </ul>
            </nav>
        </div>
        <!--Disclaimer section-->
        <div>
            <div class="disclaimer justify-content-center">
                <h6 class="text-center">
                    DISCLAIMERS: Information on this site is for general education only and does not constitute
                    financial or investment advice.
                    StayAhead is not liable for any decisions made based on our content. Please consult a qualified
                    professional for personalised guidance.
                </h6>
            </div>
        </div>
        <!--Organization & Copyright-->
        <div class="team3">
            <div>
                <h5 class=class="card-footer text-body-secondary justify-content-center">JFSD07 Team 3</h5>
                <p> by Generation Singapore in partnership with Microsoft & Temasek Poly</p>
            </div>
            <div>
                <h5>&copy; 2025 StayAhead &trade; All rights reserved</h5>
            </div>
        </div>
    </footer>

    <!--Boostrap Javascript Library-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous">
    </script>

    <!-- Scripts for authentication and notifications -->
    <script src="script/const.js"></script>
    <script src="script/auth.js"></script>
    <script src="script/components/Spinner.js"></script>
    <script src="script/loader.js"></script>
    
    <script src="script/boostrap-ftns.js"></script>
    <script src="script/form-validate.js"></script>

        <!-- Internal Custom Script -->
    <script>

        // Custom JS statements and function
        document.getElementById("formLogin").addEventListener("submit", async (event) => {

            event.preventDefault();                                                 // Prevent default browser events from happening

            const email = document.getElementById("txtEmail");                      // Create constant variables to capture form inputs - txtEmail
            const pwd = document.getElementById("txtPassword");                     // Create constant variables to capture form inputs - txtPassword

            const toastElement = document.getElementById("msg-toast");              // Get the toast element - msg-toast
            const toastBodyElement = document.getElementById("msg-toast-body");     // Get the toast element - msg-toast-body
            
            if(isEmpty(email.value) || isEmpty(pwd.value)){                         // Trap empty inputs for txtEmail and txtPassword - isEmpty()
                showToast({toastElement, 
                        toastBodyElement,
                        bgColor: "danger", msg: "All inputs must not be empty."});
                return;
            }
            
            if(!isEmail(email.value)){                                              // Trap invalid email for txtEmail - isEmail()
                showToast({toastElement, 
                        toastBodyElement, 
                        bgColor:"danger", msg: "Email is invalid."});
                return;
            }

            spinner.createSpinner("btnLogin");                                      // Create the spinner, apply it to btnLogin
            spinner.displaySpinner(true);

            const formData = { email: email.value, password: pwd.value };           // JavaScript Object formData stores the form's input values
            
            const loginSuccess = await login(formData);                             // Invoke login() function, and end (return)
            
            if(!loginSuccess){
                spinner.displaySpinner(false);                                                                          // If login unsuccessful, hide spinner
                showToast({toastElement, toastBodyElement, bgColor: "danger", msg: "Unable to log in. Try again."});    // If login unsuccessful, provide feeback
            }

        });

    </script>
</body>

</html>