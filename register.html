<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StayAhead</title>
    <!--Boostrap Style-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <!--External css-->
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
</head>

<body>
    <!-- toast -->
    <!-- https://getbootstrap.com/docs/5.3/components/toasts/ --> 
    <div class="toast-container p-3 top-0 start-50 translate-middle-x">
        <!-- Put toasts within -->
        <div id="msg-toast" class="toast align-items-center mt-2" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true" data-bs-delay="4000">
            <div class="d-flex">
                <div id="msg-toast-body" class="toast-body"> 
                <!-- Message to be added here -->
                </div>
                <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

    <!--Nav bar-->
    <section class="non-mobile">
        <nav>
            <div class="logo p-2">
                <a class="nav-link text-white justify-content-start" href="about.html">
                    <img src="assets\images\v1.png">
                    StayAhead
                </a>
            </div>
            <div>
                <ul class="nav justify-content-center">
                    <li class="nav-item px-1">
                        <a class="nav-link active" aria-current="page" href="index.html">Home</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link" href="about.html">About</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link" href="scamalerts.html">Scam Alerts</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link" href="game.html">Game</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link" href="signuplogin.html">Sign-up/Login</a>
                    </li>
                </ul>
            </div>
        </nav>
    </section>
    <!--navbar   mobile mode-->
    <section class="mobile d-sm-none">
        <nav class="navbar navbar-expand-lg navbar-dark position-fixed w-100" aria-label="First navbar example">
            <div class="container-fluid">
                <div class="mobile-nvbg d-flex justify-content-between w-100">
                    <div class="logo p-2">
                        <a class="nav-link text-white justify-content-center" href="about.html">
                            <img src="assets\images\v1.png">
                            StayAhead
                        </a>
                    </div><button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarsExample01" aria-controls="navbarsExample01" aria-expanded="false"
                        aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button>
                </div>
                <div class="navbar-collapse collapse" id="navbarsExample01">
                    <ul class="navbar-nav me-auto mb-2 ">
                        <li class="nav-item"> <a class="nav-link active" aria-current="page" href="index.html">Home</a>
                        </li>
                        <li class="nav-item"> <a class="nav-link" href="about.html">About</a> </li>
                        <li class="nav-item"> <a class="nav-link" href="scamalerts.html">Scam Alerts</a> </li>
                        <li class="nav-item"> <a class="nav-link" href="game.html">Game</a> </li>
                        <li class="nav-item"> <a class="nav-link" href="signuplogin.html">Signup/Login</a> </li>
                    </ul>
                </div>
            </div>
        </nav>
    </section>
    <!--This is the middle part, insert your page content here-->
    <!--TODO add your section here-->
    <!--register page-->
    <div class="container flex-column" id="registration-section">
        <div class="header text-center text-white mb-4 p-3 rounded">
            <h3> Get Ahead </h3>
                <h1> StayAhead </h1>
            </div>
        <form id="formSignup" class="needs-validation col" novalidate>
            <div class="col-md-12 mb-3">
                <label for="txtEmail" class="form-label mw-100">Email</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="txtEmail" aria-describedby="inputGroupPrepend2"
                        placeholder="johncena@hotmail.com" required>
                        <div class="invalid-feedback text-danger">
                            Please enter a valid email.
                        </div>
                </div>
            </div>
            <div class="col-md-12 mb-3">
                <label for="txtPassword" class="form-label">Password</label>
                <div class="input-group">
                    <input type="password" class="form-control" id="txtPassword" aria-describedby="inputGroupPrepend2"
                        required>
                    <div class="invalid-feedback text-danger">
                            Please enter a valid password.
                    </div>
                </div>
            </div>
            <div class="col-md-12 mb-3">
                <label for="txtRepeatPassword" class="form-label">Repeat Password</label>
                <div class="input-group">
                    <input type="password" class="form-control" id="txtRepeatPassword"
                        aria-describedby="inputGroupPrepend2" required>
                    <div class="invalid-feedback text-danger">
                        Passwords are not the same. Please check.
                    </div>
                </div>
            </div>
            <div class="col-12 m-3 p-4 d-flex flex-row-reverse">
                <button class="btn btn-primary" type="submit" id="btnSignup"> Register</button>
            </div>
        </form>

    </div>
    <!--Footer start here-->
    <!--Footer nav links-->
    <footer>
        <div>
            <nav class="lowernav justify-content-center">
                <ul class="nav justify-content-center">
                    <li class="nav-item px-1">
                        <a class="nav-link active" aria-current="page" href="/index.html">Home</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link" href="/about.html">About</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link " href="/scamalerts.html">Scam Alerts</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link" href="#">Game</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link" href="/signuplogin.html">Sign-up/Login</a>
                    </li>
                </ul>
            </nav>
        </div>
        <!--Disclaimer section-->
        <div class="bg-primary">
            <div class="disclaimer justify-content-center">
                <h6 class="text-center">
                    DISCLAIMERS: Information on this site is for general education only and does not constitute
                    financial or investment advice.
                    StayAhead is not liable for any decisions made based on our content. Please consult a qualified
                    professional for personalised guidance.
                </h6>
            </div>
        </div>
        <!--Organization & Copyright-->
        <div class="team3">
            <div>
                <h5 class=class="card-footer text-body-secondary justify-content-center">JFSD07 Team 3, Generation
                    Singapore.</h5>
                <p> In partnership with Microsoft & Temasek Poly.</p>
            </div>
            <div>
                <h5>&copy; 2025 StayAhead &trade; All rights reserved</h5>
            </div>
        </div>
    </footer>

    <!--Boostrap Javascript Library-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous">
        </script>
        
    <!-- Scripts for authentication and notifications -->
    <script src="script/const.js"></script>
    <script src="script/auth.js"></script>
    <script src="script/components/Spinner.js"></script>
    <script src="script/loader.js"></script>
    
    <script src="script/boostrap-ftns.js"></script>
    <script src="script/form-validate.js"></script>

    <!-- Internal Custom Script -->
    <script>

        // Custom JS statements and function
        document.getElementById("formSignup").addEventListener("submit", async (event) => {
            
            event.preventDefault();                                                 // Prevent default browser events from happening

            const email = document.getElementById("txtEmail");                      // Create constant variables to capture form inputs - txtEmail
            const pwd = document.getElementById("txtPassword");                     // Create constant variables to capture form inputs - txtPassword
            const repeat_pwd = document.getElementById("txtRepeatPassword");        // Create constant variables to capture form inputs - txtRepeatPassword

            const toastElement = document.getElementById("msg-toast");              // Get the toast element - msg-toast
            const toastBodyElement = document.getElementById("msg-toast-body");     // Get the toast element - msg-toast-body
            
            if(isEmpty(email.value) || isEmpty(pwd.value) || isEmpty(repeat_pwd.value)){ // Trap empty inputs for txtEmail and txtPassword - isEmpty()
                showToast({toastElement, 
                        toastBodyElement,
                        bgColor: "danger", msg: "All inputs must not be empty."});
                return;
            }
            
            if(!isEmail(email.value)){                                              // Trap invalid email for txtEmail - isEmail()
                showToast({toastElement, 
                        toastBodyElement, 
                        bgColor:"danger", msg: "Email is invalid."});
                return;
            }

            if (repeat_pwd.value !== pwd.value) {
                showToast({toastElement, 
                        toastBodyElement, 
                        bgColor:"danger", msg: "Password not the same."});
                return;
            }

            spinner.createSpinner("btnSignup");                                     // Create the spinner, apply it to btnLogin
            spinner.displaySpinner(true);
            
            const formData = {                                                      // JavaScript Object formData stores the form's input values
                email: email.value, 
                password: pwd.value
            };           
            
            const signupSuccess = await signup(formData);                             // Invoke login() function, and end (return)
            
            if(!signupSuccess){
                spinner.displaySpinner(false);                                                                          // If login unsuccessful, hide spinner
                showToast({toastElement, toastBodyElement, bgColor: "danger", msg: "Unable to log in. Try again."});    // If login unsuccessful, provide feeback
            }

        });

    </script>

</body>

</html>